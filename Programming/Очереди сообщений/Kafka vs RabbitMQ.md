---
создал заметку: 2024-05-08T22:46:00
author: WhiteK0T
Источник:
  - https://vc.ru/dev/869548-kafka-vs-rabbitmq-chto-nuzhno-znat-analitiku-pro-brokery-soobshcheniy
tags:
  - Kafka
  - RabbitMQ
  - CheatSheet
---


| Критерий                                                 | RabbitMQ                                                                                                                                                                                                                                                                                        | Kafka                                                                                                                                                                                          |
| -------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Протокол                                                 | AMQP, MQTT, STOMP                                                                                                                                                                                                                                                                               | Собственный двоичный протокол поверх ТСР                                                                                                                                                       |
| Модель обмена сообщениями                                | Push, брокер оповещает тех потребителей, которые подписались на очередь                                                                                                                                                                                                                         | Pull, потребители сами периодически читают сообщения из очереди                                                                                                                                |
| Задержка обработки данных                                | Минимальная за счёт активной отправки сообщений брокером                                                                                                                                                                                                                                        | Выше за счёт интервального опроса брокера консьюмерами                                                                                                                                         |
| Гарантия доставки сообщенй                               | • At most once • At least once                                                                                                                                                                                                                                                                  | • At most once • At least once • Exactly once                                                                                                                                                  |
| Удаление сообщений из очереди                            | Удаляются сразу после обработки потребителями                                                                                                                                                                                                                                                   | Сообщения не удаляются сразу, а очищаются через некоторое время в зависимости от настроек конфигурации                                                                                         |
| Приоритезация сообщений                                  | Поддерживается. Сообщениям можно назначать разные приоритеты, и брокер будет отправлять их консьюмерам в соответствии с ними                                                                                                                                                                    | Нет, но можно создать несколько топиков создать под сообщения с разным приоритетом                                                                                                             |
| Порядок доставки сообщений                               | Гарантируется в рамках одной очереди, но не гарантируется между разными очередями                                                                                                                                                                                                               | Гарантируется в рамках одной партиции, но не гарантируется между разными партициями                                                                                                            |
| Маршрутизация                                            | "Умная": все сообщения маршрутизируются через обменник (exchange) перед попаданием в очереди. RabbitMQ предлагает несколько видов маршрутизации с помощью ключей по протоколу AMQP.                                                                                                             | "Тупая": сообщения просто кладутся туда, куда были посланы продьюсером                                                                                                                         |
| Возможность перечитать уже обработанное сообщение заново | Нет, так как оно уже удалено после обработки потребителями                                                                                                                                                                                                                                      | Можно перечитывать любые сообщения                                                                                                                                                             |
| Пакетная обработка сообщений                             | Нет                                                                                                                                                                                                                                                                                             | Поддерживается благодаря модели pull, потребитель может считывать сколько угодно сообщений за раз                                                                                              |
| Поддержка транзакций                                     | Ограниченно поддерживается. RabbitMQ поддерживает транзакции на уровне сообщений, но не на уровне очередей или обменников                                                                                                                                                                       | Поддерживается. Kafka позволяет создавать атомарные транзакции между несколькими топиками и партициями, а также обеспечивает точность в один раз (exactly-once) при потоковой обработке данных |
| Производительность                                       | До 10 тыс сообщений в секунду                                                                                                                                                                                                                                                                   | До 1 млн сообщений в секунду                                                                                                                                                                   |
| Масштабируемость                                         | Может масштабироваться горизонтально, но это требует большего количества настроек и управления                                                                                                                                                                                                  | Kafka легко масштабируется горизонтально, позволяет добавлять новые брокеры для обработки большего объема данных                                                                               |
| Порог вхождения                                          | Проще разработка и администрирование. Есть библиотеки для большинства языков и открытый исходный код. А ещё есть удобная админка, где можно в режиме реального времени разбираться с тем, что происходит. Роутинги можно настраивать в процессе, переключая нагрузку и меняя правила обработки. | Требуются знания о распределенных системах, параллельной обработке, конфигурации и мониторинге кластера, а также специфического протокола Kafka                                                |
| Отказоустойчивость                                       | Средняя за счёт репликации очередей и подтверждения сообщений                                                                                                                                                                                                                                   | Высокая за счёт репликации партиций и сохранения оффсетов консьюмеров                                                                                                                          |
| Скорость доставки сообщений                              | Работают быстрее на относительно небольших объёмах                                                                                                                                                                                                                                              | Лучше подходит для передачи большого количества сообщений                                                                                                                                      |
#Kafka #RabbitMQ #CheatSheet